(function(t){function e(e){for(var n,o,s=e[0],l=e[1],u=e[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);h&&h(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,s=1;s<r.length;s++){var l=r[s];0!==a[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},a={app:0},i=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var h=l;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0edd":function(t,e,r){"use strict";r("12f7")},"12f7":function(t,e,r){},4750:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("select",{directives:[{name:"model",rawName:"v-model",value:t.theme,expression:"theme"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.theme=e.target.multiple?r:r[0]}}},t._l(t.themes,(function(e){return r("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})),0),r("u-gantt-chart",{attrs:{axis:t.axis,"bar-start-key":"start","bar-end-key":"end","bar-config-key":"config",bundles:t.bundles,globalBundles:t.globalBundles,"no-tooltip":t.noTooltip,grid:t.grid,"grid-size":t.gridSize,highlighted:t.highlighted,"is-magnetic":t.isMagnetic,height:t.height,"hide-timeaxis":t.hideTimeaxis,"push-on-overlap":t.pushOnOverlap,"row-height":t.rowHeight,"row-label-width":t.rowLabelWidth,"snap-back-on-overlap":"",theme:t.theme},on:{"dragend-bar":function(e){return t.onDragend(e)}}},t._l(t.rows,(function(e){return r("u-gantt-row",{key:e.label,attrs:{bars:e.bars,"highlight-on-hover":t.highlightOnHover,label:e.label,"label-style":e.labelStyle,"row-style":e.style,threadID:e.threadID},scopedSlots:t._u([{key:"bar-label",fn:function(e){var n=e.bar;return[r("span",[t._v(t._s(n.label))])]}}],null,!0)})})),1)],1)},i=[],o={data:function(){return{axis:[{key:"group1",label:"пн 18 апреля",units:8},{key:"group2",label:"вт 19 апреля",units:8},{key:"group3",label:"ср 20 апреля",units:8},{key:"group4",label:"чт 21 апреля",units:8},{key:"group5",label:"пт 22 апреля",units:5}],bundles:[{key:"blueBundle",value:"fixed"},{key:"redBundle",value:"relative"}],noTooltip:!1,grid:!0,gridSize:30,globalBundles:"fixed",isMagnetic:!0,height:"50vh",hideTimeaxis:!1,highlightOnHover:!0,highlighted:[0],pushOnOverlap:!1,rowHeight:40,rowLabelWidth:200,rows:[{label:"Group 0",bars:[{start:"group1, 3",end:"group1, 6",label:"Immobile",tooltip:"Bar tooltip",config:{color:"white",backgroundColor:"#404040",opacity:.5,immobile:!0}},{start:"group2, 2",end:"group2, 7",label:"With handles!",tooltip:"Bar tooltip",config:{color:"white",backgroundColor:"#a23def",handles:!0}}]},{label:"Group 1",bars:[{start:"group1, 0",end:"group1, 8",label:"Bar",tooltip:"Bar tooltip",config:{color:"white",backgroundColor:"#de3b26",bundle:"redBundle"}},{start:"group2, 2",end:"group3, 0",label:"Bar",tooltip:"Bar tooltip",config:{color:"white",backgroundColor:"#2e74a3",bundle:"blueBundle"}},{start:"group3, 5",end:"group4, 3",label:"Bar",tooltip:"Bar tooltip",config:{color:"white",backgroundColor:"#aa34a3"}}],threadID:"1"},{label:"2/3",labelStyle:{justifyContent:"end"},bars:[{start:"group1, 1",end:"group2, 1",label:"We belong together (h)",tooltip:"Bar tooltip",config:{color:"white",backgroundColor:"#de3b26",bundle:"redBundle"}},{start:"group2, 2",end:"group3, 0",label:"We belong together (v&h)",tooltip:"Bar tooltip",config:{color:"white",backgroundColor:"#2e74a3",bundle:"blueBundle"}},{start:"group3, 2",end:"group3, 5",label:"Bar",tooltip:"Bar tooltip",config:{color:"white",backgroundColor:"#5effad",pushOnOverlap:!1,zIndex:2}}],threadID:"1"},{label:"3/3",labelStyle:{justifyContent:"end"},bars:[{start:"group1, 4",end:"group2, 2",label:"Bar",tooltip:"Bar tooltip",config:{color:"white",backgroundColor:"#d18aaf",handles:!0}},{start:"group3, 3",end:"group4, 5",label:"Rectangular",tooltip:"Bar tooltip",config:{color:"white",backgroundColor:"#f2840f",borderRadius:0}}],threadID:"1"},{label:"Group 2",bars:[],style:{background:"linear-gradient(-45deg, rgba(0, 0, 0, 0) 48%, rgba(0, 0, 0, 0.2) 50%, rgba(0, 0, 0, 0) 52%)",backgroundSize:"1em 1em"},threadID:"2"},{label:"2/2",labelStyle:{justifyContent:"end"},bars:[],threadID:"2"}],theme:"default",themes:["creamy","crimson","dark","default","flare","fuchsia","grove","material-blue","sky","slumber","vue"]}},methods:{onDragend:function(t){var e=t.event,r=t.bar,n=t.movedBars;console.log("onDragend",{event:e.type,bar:r,movedBars:n})}}},s=o,l=(r("0edd"),r("2877")),u=Object(l["a"])(s,a,i,!1,null,null,null),h=u.exports,d=(r("d3b7"),r("159b"),r("b64b"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"u-gantt-chart-container",style:{width:t.width,height:t.height},attrs:{"data-theme":t.theme}},[r("div",{staticClass:"u-gantt-chart"},[t.hideTimeaxis?t._e():r("u-gantt-timeaxis",{attrs:{"all-units":t.allUnits,axis:t.axis,"grid-size":t.gridSize,"row-label-width":t.rowLabelWidth,"timemarker-offset":t.timemarkerOffset}}),r("div",{staticClass:"u-gantt-rows-container",style:{width:t.rowLabelWidth+t.allUnits.length*t.gridSize+"px"}},[t.grid?r("u-gantt-grid",{attrs:{"all-units":t.allUnits,axis:t.axis,"grid-size":t.gridSize,highlighted:t.highlighted,"row-label-width":t.rowLabelWidth}}):t._e(),t._t("default")],2)],1)])}),f=[],c=r("3835"),g=r("2909"),b=(r("a9e3"),r("6062"),r("3ca3"),r("ddb0"),r("7db0"),r("4de4"),r("b0c0"),r("c740"),r("a630"),r("4e82"),r("ac1f"),r("1276"),r("b65f"),r("b680"),r("99af"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"u-gantt-timeaxis",staticClass:"u-gantt-timeaxis",style:{width:t.rowLabelWidth+t.allUnits.length*t.gridSize+"px"}},[r("div",{staticClass:"u-gantt-timeaxis__empty-space",style:{minWidth:t.rowLabelWidth+"px"}}),r("div",{staticClass:"u-gantt-timeaxis__points"},t._l(t.axisPoints,(function(e,n){return r("div",{key:"point-"+n,staticClass:"u-gantt-timeaxis__point"},[r("div",{style:{maxWidth:t.gridSize*e.units.length+"px"}},[r("span",{attrs:{title:e.label}},[t._v(t._s(e.label))])]),r("div",{staticClass:"u-gantt-timeaxis__units"},t._l(e.units,(function(e,n){return r("div",{key:"unit-"+n,staticClass:"u-gantt-timeaxis__unit",style:{width:t.gridSize+"px"}},[r("span",{style:{fontSize:t.unitFontSize}},[t._v(t._s(e.label))]),r("div",{staticClass:"u-gantt-timeaxis__unit-pin"})])})),0)])})),0),r("div",{ref:"u-gantt-timeaxis-marker",staticClass:"u-gantt-timeaxis__marker"})])}),p=[],m={name:"UGanttTimeaxis",props:{allUnits:{type:Array,default:function(){return[]}},axis:{type:Array,default:function(){return[]}},gridSize:{type:Number},rowLabelWidth:{type:Number},timemarkerOffset:{type:Number,default:0}},data:function(){return{unitFontSize:"11px",timemarker:null}},computed:{axisPoints:function(){var t=[];return this.axis.forEach((function(e){for(var r={label:e.label,units:[]},n=0;n<=e.units-1;n++){var a={label:n};r.units.push(a)}t.push(r)})),t}},watch:{gridSize:function(){this.onWindowResize()}},mounted:function(){this.timemarker=this.$refs["u-gantt-timeaxis-marker"],this.onWindowResize(),window.addEventListener("resize",this.onWindowResize),window.addEventListener("mousemove",this.moveTimemarker),window.addEventListener("dragover",this.moveTimemarker)},destroyed:function(){window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("mousemove",this.moveTimemarker),window.removeEventListener("dragover",this.moveTimemarker)},methods:{moveTimemarker:function(t){var e=this.timemarker.closest(".u-gantt-chart");if(e){var r=e.scrollLeft+t.clientX-this.timemarkerOffset-this.horizontalAxisContainer.left;r>this.horizontalAxisContainer.width&&(r=this.horizontalAxisContainer.width),this.timemarker.style.left="".concat(r,"px")}},onWindowResize:function(){this.$refs["u-gantt-timeaxis"]&&(this.horizontalAxisContainer=this.$refs["u-gantt-timeaxis"].getBoundingClientRect(),this.unitFontSize=Math.min(9.5,this.horizontalAxisContainer.width/this.allUnits.length*.75)+"px")}}},v=m,B=Object(l["a"])(v,b,p,!1,null,null,null),y=B.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"u-gantt-grid",staticClass:"u-gantt-grid",style:{left:t.rowLabelWidth+"px",width:t.allUnits.length*t.gridSize+"px"}},t._l(t.allUnits,(function(e,n){return r("div",{key:n,class:["u-gantt-grid__line",{"u-gantt-grid-line-last":n===t.allUnits.length-1},{"u-gantt-grid-line-highlighted":t.isHighlighted(e)}],style:{width:t.gridSize+"px"}})})),0)},x=[],T=(r("caad"),r("2532"),{name:"UGanttGrid",props:{allUnits:{type:Array,default:function(){return[]}},axis:{type:Array,default:function(){return[]}},gridSize:{type:Number},highlighted:{type:Array,default:function(){return[]}},rowLabelWidth:{type:Number}},methods:{isHighlighted:function(t){return this.highlighted.includes(t.index)}}}),C=T,O=Object(l["a"])(C,w,x,!1,null,null,null),G=O.exports,S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._g({ref:"u-gantt-row",staticClass:"u-gantt-row",style:{height:t.chartProps.rowHeight+"px"}},t.$listeners),[r("div",{staticClass:"u-gantt-row__label",style:t.rowLabelStyle},[r("span",{attrs:{title:t.label}},[t._t("label",(function(){return[t._v(t._s(t.label))]}))],2)]),r("div",{ref:"bars-container",staticClass:"u-gantt-row__bars-container",style:t.rowStyle,on:{dragover:function(e){return t.onDragover(e)},dragleave:function(e){return t.onDragleave(e)},drop:function(e){return t.onDrop(e)},click:function(e){return e.target!==e.currentTarget?null:t.$emit("click",e)},dblclick:function(e){return e.target!==e.currentTarget?null:t.onDoubleClick(e)},mouseover:function(e){return e.target!==e.currentTarget?null:t.onMouseover()},mouseleave:function(e){return t.onMouseleave()},mouseout:function(e){return t.onMouseout(e)}}},t._l(t.localBars,(function(e,n){return r("u-gantt-bar",{key:"bar-"+n,attrs:{"all-bars-in-row":t.localBars,bar:e,"bars-container":t.barsContainer},scopedSlots:t._u([{key:"bar-label",fn:function(e){var r=e.bar;return[t._t("bar-label",null,{bar:r})]}}],null,!0)})})),1)])},k=[],L=r("5530"),D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{ref:"u-gantt-bar",class:["u-gantt-bar",{"u-gantt-bar-immobile":t.barConfig.immobile},{"u-gantt-bar-resizable":t.barConfig.handles}],style:t.barStyle,on:{mouseenter:function(e){return e.stopPropagation(),t.onMouseenter(e)},mouseleave:function(e){return e.stopPropagation(),t.onMouseleave(e)},mousedown:function(e){return e.stopPropagation(),t.onMousedown(e)},click:function(e){return e.stopPropagation(),t.onClick(e)},dblclick:function(e){return t.onDblclick(e)},contextmenu:function(e){return t.onContextmenu(e)}}},[r("div",{staticClass:"u-gantt-bar__label"},[t._t("bar-label",(function(){return[t._v(t._s(t.barConfig.label))]}),{bar:t.localBar})],2),t.barConfig.handles?[r("div",{staticClass:"u-gantt-bar__handle-left"}),r("div",{staticClass:"u-gantt-bar__handle-right"})]:t._e()],2),r("transition",{attrs:{name:"fade",mode:"out-in"}},[t.noTooltip||t.barConfig.noTooltip||!t.showTooltip?t._e():r("div",{staticClass:"u-gantt-bar__tooltip",style:t.tooltipStyle},[r("div",{staticClass:"color-indicator",style:{background:this.barStyle.background||this.barStyle.backgroundColor}}),r("div",[r("div",[t._v(t._s(t.localBar.tooltip))]),r("div",[t._v(t._s(t.tooltipContent))])])])])],1)},E=[],P=r("53ca");r("fb6a"),r("5319"),r("4d63"),r("c607"),r("2c3e"),r("25f0"),r("d81d");String.prototype.formatUnicorn=String.prototype.formatUnicorn||function(){var t=this;if(arguments.length){var e="#$%#$%",r=Object(P["a"])(arguments[0]),n="string"===r||"number"===r?Array.prototype.slice.call(arguments):arguments[0];for(var a in n){var i=String(n[a]).replace("{",e);t=t.replace(new RegExp("\\{"+a+"\\}","gi"),i)}t=t.replace(e,"{")}return t};var $={name:"UGanttBar",props:{allBarsInRow:{type:Array},bar:{type:Object},barsContainer:[Object,DOMRect]},inject:["getAllUnits","getChartProps","globToText","initDragOfBarsFromBundle","moveBarsFromBundleOfPushedBar","onBarEvent","onDragendBar","setDragLimitsOfGanttBar","textToGlob","moveBarToOtherRow","getMovedBars","checkBarMoving"],data:function(){return{barStartBeforeDrag:null,barEndBeforeDrag:null,cursorOffsetX:0,cursorOffsetY:0,dragLimitLeft:null,dragLimitRight:null,isDragging:!1,isMainBarOfDrag:!1,localBar:this.bar,mousemoveCallback:null,showTooltip:!1,tooltipTimeout:null,offsetY:0,phantomMode:!1,phantomCursorType:"grabbing",phantomNewStart:null,phantomNewEnd:null,bundleBars:null,phantomX:0,phantomY:0,phantomChild:!1}},computed:{movedBars:function(){return this.getMovedBars()},allUnits:function(){return this.getAllUnits()},chartProps:function(){return this.getChartProps()},barConfigKey:function(){return this.chartProps.barConfigKey},barStartKey:function(){return this.chartProps.barStartKey},barEndKey:function(){return this.chartProps.barEndKey},noTooltip:function(){return this.chartProps.noTooltip},minGapBetweenBars:function(){return this.chartProps.minGapBetweenBars},barStartGlob:{get:function(){return this.textToGlob(this.localBar[this.barStartKey])},set:function(t){this.localBar[this.barStartKey]=this.globToText(t,"start")}},barEndGlob:{get:function(){return this.textToGlob(this.localBar[this.barEndKey])},set:function(t){this.localBar[this.barEndKey]=this.globToText(t,"end")}},barStartText:function(){return this.localBar[this.barStartKey]},barEndText:function(){return this.localBar[this.barEndKey]},barDurationText:function(){var t=this.textToGlob(this.localBar[this.barStartKey]),e=this.textToGlob(this.localBar[this.barEndKey]),r=e-t;return r.toFixed(r%1===0?0:2)},barConfig:function(){return this.localBar[this.barConfigKey]?Object(L["a"])(Object(L["a"])({},this.localBar[this.barConfigKey]),{},{background:this.localBar[this.barConfigKey].isShadow?"grey":this.localBar[this.barConfigKey].background||this.localBar[this.barConfigKey].backgroundColor,opacity:this.localBar[this.barConfigKey].isShadow?"0.3":this.localBar[this.barConfigKey].opacity}):{}},barStyle:function(){if(this.phantomMode){if(!this.barsContainer.width)return;var t=this.mapGlobToPosition(this.barStartGlob),e=this.mapGlobToPosition(this.barEndGlob);return Object(L["a"])(Object(L["a"])({},this.barConfig||{}),{},{left:"".concat(this.phantomX,"px"),width:"".concat(e-t,"px"),height:"".concat(this.chartProps.rowHeight-6,"px"),top:"".concat(this.phantomY,"px"),position:"absolute",opacity:.7,zIndex:100,cursor:this.phantomCursorType})}if(this.barsContainer.width){var r=this.mapGlobToPosition(this.barStartGlob),n=this.mapGlobToPosition(this.barEndGlob);return Object(L["a"])(Object(L["a"])({},this.barConfig||{}),{},{left:"".concat(r,"px"),width:"".concat(n-r,"px"),height:"".concat(this.chartProps.rowHeight-6,"px"),zIndex:this.barConfig.zIndex||(this.isDragging?2:1)})}},tooltipContent:function(){return this.chartProps.tooltipFormat.formatUnicorn({start:this.barStartText,end:this.barEndText,duration:this.barDurationText})},tooltipStyle:function(){return{left:this.barStyle.left,top:"".concat(this.chartProps.rowHeight,"px")}}},watch:{bar:function(t){this.localBar=t}},methods:{onMouseenter:function(t){var e=this;this.noTooltip||(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout((function(){return e.showTooltip=!0}),800)),this.barConfig.immobile&&(document.body.style.cursor="not-allowed"),this.onBarEvent({event:t,type:t.type},this)},onMouseleave:function(t){this.noTooltip||(clearTimeout(this.tooltipTimeout),this.showTooltip=!1),this.barConfig.immobile&&(document.body.style.cursor="auto"),this.onBarEvent({event:t,type:t.type},this)},onContextmenu:function(t){var e=this.mapPositionToGlob(t.clientX-this.barsContainer.left);this.onBarEvent({event:t,type:t.type,time:e},this)},onClick:function(t){var e=this.mapPositionToGlob(t.clientX-this.barsContainer.left);this.onBarEvent({event:t,type:t.type,time:e},this)},onDblclick:function(t){var e=this.mapPositionToGlob(t.clientX-this.barsContainer.left);this.onBarEvent({event:t,type:t.type,time:e},this)},onMousedown:function(t){var e=this;if(t.preventDefault(),2!==t.button){this.barConfig.immobile||this.barConfig.isShadow||(this.setDragLimitsOfGanttBar(this),window.addEventListener("mousemove",this.onFirstMousemove,{once:!0}),window.addEventListener("mouseup",(function(){return window.removeEventListener("mousemove",e.onFirstMousemove)}),{once:!0}));var r=this.mapPositionToGlob(t.clientX-this.barsContainer.left);this.onBarEvent({event:t,type:t.type,time:r},this)}},onFirstMousemove:function(t){this.isMainBarOfDrag=!0,this.bundleBars=this.initDragOfBarsFromBundle(this,t),console.log(this.bundleBars)},initDrag:function(t){document.body.style.cursor="move",this.isDragging=!0,this.barStartBeforeDrag=this.textToGlob(this.localBar[this.barStartKey]),this.barEndBeforeDrag=this.textToGlob(this.localBar[this.barEndKey]);var e=this.$refs["u-gantt-bar"].getBoundingClientRect().left,r=this.$refs["u-gantt-bar"].getBoundingClientRect().top;this.cursorOffsetX=t.clientX-e,this.cursorOffsetY=t.clientY-r,this.phantomX=0,this.phantomY=0;var n=t.target.className;switch(n){case"u-gantt-bar__handle-left":document.body.style.cursor="w-resize",this.mousemoveCallback=this.dragByHandleLeft;break;case"u-gantt-bar__handle-right":document.body.style.cursor="e-resize",this.mousemoveCallback=this.dragByHandleRight;break;default:this.mousemoveCallback=this.drag}window.addEventListener("mousemove",this.mousemoveCallback),window.addEventListener("mouseup",this.endDrag)},getBarWidth:function(t){var e=this.mapGlobToPosition(this.textToGlob(t[this.barStartKey])),r=this.mapGlobToPosition(this.textToGlob(t[this.barEndKey]));return r-e},drag:function(t){var e=t.target.closest(".u-gantt-chart");if(e&&void 0!==this.$refs["u-gantt-bar"]){var r=this.$refs["u-gantt-bar"].getBoundingClientRect().width,n=e.scrollLeft+t.clientX-this.barsContainer.left-this.cursorOffsetX,a=n+r;if(this.phantomMode||(this.offsetY=e.scrollTop+t.clientY-this.barsContainer.top-this.chartProps.rowHeight/2),!this.phantomMode&&this.isMainBarOfDrag&&Math.abs(this.offsetY)>this.chartProps.rowHeight/2&&(this.phantomMode=!0,this.bundleBars.forEach((function(t){return t.phantomChild=!0})),this.barConfig.noTooltip=!0),this.phantomMode)return this.phantomX=e.scrollLeft+t.clientX-this.barsContainer.left-this.cursorOffsetX,this.phantomY=e.scrollTop+t.clientY-this.barsContainer.top-this.cursorOffsetY,this.phantomCursorType=this.checkBarMoving(this,t),this.phantomNewStart=this.mapPositionToGlob(n),this.phantomNewEnd=this.mapPositionToGlob(a),void this.onBarEvent({event:t,type:"drag"},this);this.isPosOutOfDragRange(n,a)||(this.barStartGlob=this.mapPositionToGlob(n),this.barEndGlob=this.mapPositionToGlob(a),this.manageOverlapping(),this.onBarEvent({event:t,type:"drag"},this))}},dragByHandleLeft:function(t){var e=t.target.closest(".u-gantt-chart");if(e){var r=e.scrollLeft+t.clientX-this.barsContainer.left,n=this.mapPositionToGlob(r);this.barEndGlob-n<this.chartProps.defaultBarLength||this.isPosOutOfDragRange(r,null)||(this.barStartGlob=n,this.manageOverlapping())}},dragByHandleRight:function(t){var e=t.target.closest(".u-gantt-chart");if(e){var r=e.scrollLeft+t.clientX-this.barsContainer.left,n=this.mapPositionToGlob(r);n-this.barStartGlob<this.chartProps.defaultBarLength||this.isPosOutOfDragRange(null,r)||(this.barEndGlob=n,this.manageOverlapping())}},isPosOutOfDragRange:function(t,e){var r=this;if(t&&t<0)return!0;if(e>this.barsContainer.width)return!0;if(t&&null!==this.dragLimitLeft&&t<this.dragLimitLeft+this.minGapBetweenBars)return!0;if(e&&null!==this.dragLimitRight&&e>this.dragLimitRight-this.minGapBetweenBars)return!0;if(!this.chartProps.pushOnOverlap||!1===this.barConfig.pushOnOverlap)return!1;var n=t&&this.textToGlob(this.localBar[this.barStartKey])<this.barStartBeforeDrag,a=e&&this.textToGlob(this.localBar[this.barEndKey])>this.barEndBeforeDrag,i=this.allBarsInRow.findIndex((function(t){return t==r.localBar})),o=[];if(a){if(o=this.allBarsInRow.slice(i+1),o.length){var s=o.map((function(t){return t[r.barConfigKey]&&!1===t[r.barConfigKey].pushOnOverlap?0:r.getBarWidth(t)})).reduce((function(t,e){return t+e}));if(e>this.barsContainer.width-s)return!0}}else if(n&&(o=this.allBarsInRow.slice(0,i),o.length)){var l=o.map((function(t){return t[r.barConfigKey]&&!1===t[r.barConfigKey].pushOnOverlap?0:r.getBarWidth(t)})).reduce((function(t,e){return t+e}));if(t<l)return!0}return!1},isNewPosOutOfDragRange:function(){var t=this.mapGlobToPosition(this.textToGlob(this.bar.start)),e=this.mapGlobToPosition(this.textToGlob(this.bar.end));return!!(t&&t<0)||(e>this.barsContainer.width||(!!(t&&null!==this.dragLimitLeft&&t<this.dragLimitLeft+this.minGapBetweenBars)||(!!(e&&null!==this.dragLimitRight&&e>this.dragLimitRight-this.minGapBetweenBars)||(this.chartProps.pushOnOverlap&&this.barConfig.pushOnOverlap,!1))))},endDrag:function(t){var e=!1,r=!1,n=!1;switch(document.body.style.cursor){case"e-resize":r=!0;break;case"w-resize":e=!0;break;default:n=!0;break}console.log(this.isMainBarOfDrag),console.log(this.phantomMode),console.log(this),this.isMainBarOfDrag&&this.moveBarToOtherRow(this,t),this.offsetY=0,this.isDragging=!1,this.dragLimitLeft=null,this.dragLimitRight=null,document.body.style.cursor="auto",window.removeEventListener("mousemove",this.mousemoveCallback),window.removeEventListener("mouseup",this.endDrag),this.isMainBarOfDrag&&(this.barConfig.noTooltip=!1,this.phantomNewStart=null,this.phantomNewEnd=null,this.isMainBarOfDrag=!1,this.bundleBars=null),this.onDragendBar(t,this,{left:e,right:r,move:n})},snapBack:function(){this.barStartGlob=this.barStartBeforeDrag,this.barEndGlob=this.barEndBeforeDrag},manageOverlapping:function(){if(this.chartProps.pushOnOverlap&&!1!==this.barConfig.pushOnOverlap){var t=this.localBar,e=this.getOverlapBarAndType(t),r=e.overlapBar,n=e.overlapType;while(r){var a=void 0,i=this.textToGlob(t[this.barStartKey]),o=this.textToGlob(t[this.barEndKey]),s=this.textToGlob(r[this.barStartKey]),l=this.textToGlob(r[this.barEndKey]);switch(n){case"left":a=l-i+this.minGapBetweenBars,r[this.barEndKey]=this.globToText(i-this.minGapBetweenBars,"end"),r[this.barStartKey]=this.globToText(s-a,"start");break;case"right":a=o-s+this.minGapBetweenBars,r[this.barStartKey]=this.globToText(o+this.minGapBetweenBars,"start"),r[this.barEndKey]=this.globToText(l+a,"end");break;default:return void console.warn("One bar is inside of the other one! This should never occur while push-on-overlap is active!")}this.moveBarsFromBundleOfPushedBar(r,a,n),t=r;var u=this.getOverlapBarAndType(r);r=u.overlapBar,n=u.overlapType}}},getOverlapBarAndType:function(t,e){var r=this;console.log(t);var n,a,i,o,s=this.textToGlob(t[this.barStartKey]),l=this.textToGlob(t[this.barEndKey]);console.log(e),o=void 0===e?this.allBarsInRow.find((function(e){if(e===t||e[r.barConfigKey]&&!1===e[r.barConfigKey].pushOnOverlap)return!1;var o=r.textToGlob(e[r.barStartKey]),u=r.textToGlob(e[r.barEndKey]);return n=s>o&&s<u,a=l>o&&l<u,i=o>s&&o<l||u>s&&u<l||s===o&&l===u,n||a||i})):e.find((function(e){if(e===t||e[r.barConfigKey]&&!1===e[r.barConfigKey].pushOnOverlap)return!1;var o=r.textToGlob(e[r.barStartKey]),u=r.textToGlob(e[r.barEndKey]);return n=s>o&&s<u,a=l>o&&l<u,i=o>s&&o<l||u>s&&u<l||s===o&&l===u,n||a||i}));var u=n?"left":a?"right":i?"between":null;return{overlapBar:o,overlapType:u}},moveBarByChildPointsAndPush:function(t,e){switch(e){case"left":this.barStartGlob=this.barStartGlob-t,this.barEndGlob=this.barEndGlob-t;break;case"right":this.barStartGlob=this.barStartGlob+t,this.barEndGlob=this.barEndGlob+t;break;default:return void console.warn("wrong direction in moveBarByChildPointsAndPush")}this.manageOverlapping()},mapGlobToPosition:function(t){return t/this.allUnits.length*this.barsContainer.width},mapPositionToGlob:function(t){return t/this.barsContainer.width*this.allUnits.length}}},K=$,_=Object(l["a"])(K,D,E,!1,null,null,null),R=_.exports,M={name:"UGanttRow",components:{UGanttBar:R},props:{bars:{type:Array,default:function(){return[]}},highlightOnHover:{type:Boolean},label:{type:String,default:"Row"},labelStyle:{type:Object},rowStyle:{type:Object},threadID:{type:String,default:"0"}},inject:["getAllUnits","getChartProps","globToText","textToGlob"],data:function(){return{barsContainer:{},localBars:this.bars}},computed:{allUnits:function(){return this.getAllUnits()},chartProps:function(){return this.getChartProps()},defaultBarLength:function(){return this.chartProps.defaultBarLength},barConfigKey:function(){return this.chartProps.barConfigKey},rowLabelStyle:function(){return Object(L["a"])({width:"".concat(this.chartProps.rowLabelWidth,"px")},this.labelStyle)}},watch:{"chartProps.axis":function(){this.barsContainer=this.$refs["bars-container"].getBoundingClientRect()},"chartProps.rowLabelWidth":function(){this.barsContainer=this.$refs["bars-container"].getBoundingClientRect()},"chartProps.gridSize":function(){this.barsContainer=this.$refs["bars-container"].getBoundingClientRect()},bars:function(t){this.localBars=t}},mounted:function(){this.barsContainer=this.$refs["bars-container"].getBoundingClientRect(),window.addEventListener("resize",this.onWindowResize)},destroyed:function(){window.removeEventListener("resize",this.onWindowResize)},methods:{onDragover:function(t){t.preventDefault()},onDragleave:function(){console.log(this.data())},onDrop:function(t){console.log(t)},onDoubleClick:function(t){var e=this;if(this.chartProps.allowAdd){var r=this.$refs["bars-container"].getBoundingClientRect(),n=t.clientX-r.left,a=Math.floor(n/r.width*this.allUnits.length),i=a,o={};o[this.chartProps.barStartKey]=this.globToText(i,"start"),o[this.chartProps.barEndKey]=this.globToText(i+this.defaultBarLength,"end"),o[this.barConfigKey]={handles:!0},this.localBars.push(o),this.localBars.sort((function(t,r){return e.textToGlob(t[e.chartProps.barStartKey])-e.textToGlob(r[e.chartProps.barStartKey])}))}this.$emit("dblclick",t)},onMouseover:function(){this.highlightOnHover&&this.$refs["u-gantt-row"].classList.add("u-gantt-row-highlighted")},onMouseleave:function(){this.$refs["u-gantt-row"].classList.remove("u-gantt-row-highlighted")},onMouseout:function(t){null!==t.relatedTarget&&t.relatedTarget.classList.contains("u-gantt-bar__tooltip")&&this.$refs["u-gantt-row"].classList.remove("u-gantt-row-highlighted")},onWindowResize:function(){this.$refs["bars-container"]&&(this.barsContainer=this.$refs["bars-container"].getBoundingClientRect())}}},I=M,z=Object(l["a"])(I,S,k,!1,null,null,null),U=z.exports,A={name:"UGanttChart",components:{UGanttTimeaxis:y,UGanttGrid:G},props:{allowAdd:{type:Boolean,default:!0},axis:{type:Array,default:function(){return[]}},barConfigKey:{type:String,default:"config"},barEndKey:{type:String,default:"end"},barStartKey:{type:String,default:"start"},bundles:{type:Array,default:function(){return[]}},defaultBarLength:{type:Number,default:1},grid:{type:Boolean,default:!1},gridSize:{type:Number,default:30},globalBundles:{type:String,default:"fixed"},height:{type:String,default:"100%"},hideTimeaxis:{type:Boolean,default:!1},highlighted:{type:Array,default:function(){return[]}},isMagnetic:{type:Boolean},minGapBetweenBars:{type:Number,default:0},noTooltip:{type:Boolean,default:!1},pushOnOverlap:{type:Boolean},rowHeight:{type:Number,default:40},rowLabelWidth:{type:Number,default:200},snapBackOnOverlap:{type:Boolean},theme:{type:String,default:"default"},tooltipFormat:{type:String,default:"{start} - {end} duration: {duration}"},width:{type:String,default:"100%"}},data:function(){return{movedBarsInDrag:new Set,timemarkerOffset:0,rowOffset:0}},computed:{allUnits:function(){var t=[];return this.axis.forEach((function(e){for(var r=0;r<=e.units-1;r++){var n={groupKey:e.key,groupLabel:e.label,index:r};t.push(n)}})),t}},methods:{checkBarMoving:function(t,e){var r,n=this,a=!0;if(void 0!==t.barConfig.bundle)switch(0!==this.bundles.length&&(r=this.bundles.find((function(e){return e.key===t.barConfig.bundle})).value),void 0===r&&(r=this.globalBundles),r){case"fixed":a=!0;break;case"relative":a=!1;break}var i=this.getGanttBarChildrenList().find((function(e){return e.localBar===t.localBar})).$parent,o=this.$children.filter((function(t){return t.$options.name===U.name}));this.rowOffset=0;var s=o.find((function(t){return t.$refs["u-gantt-row"].getBoundingClientRect().top<e.clientY&&t.$refs["u-gantt-row"].getBoundingClientRect().left<e.clientX&&t.$refs["u-gantt-row"].getBoundingClientRect().top+t.$refs["u-gantt-row"].getBoundingClientRect().height>e.clientY&&t.$refs["u-gantt-row"].getBoundingClientRect().left+t.$refs["u-gantt-row"].getBoundingClientRect().width>e.clientX}));if(void 0===s)return"not-allow";if(this.rowOffset=o.findIndex((function(t){return t===s}))-o.findIndex((function(t){return t===i})),a){var l=Array.from(this.movedBarsInDrag.values()).every((function(t){var e=n.getGanttBarChildrenList().find((function(e){return e.localBar===t})).$parent,r=o.findIndex((function(t){return t===e}))+n.rowOffset;return r<o.length&&r>=0&&e.threadID===o[r].threadID}));if(l)return"grabbing"}else{var u=Array.from(this.movedBarsInDrag).every((function(t){var e=n.getGanttBarChildrenList().find((function(e){return e.localBar===t})).$parent;return e!==s||e===i}));if(u&&s.threadID===i.threadID)return"grabbing"}return"not-allowed"},moveBarToOtherRow:function(t,e){var r=this;if(console.log(t),t.phantomMode){var n,a;if(void 0!==t.barConfig.bundle)switch(0!==this.bundles.length&&(a=this.bundles.find((function(e){return e.key===t.barConfig.bundle})).value),void 0===a&&(a=this.globalBundles),a){case"fixed":n=!0;break;case"relative":n=!1;break}var i=this.getGanttBarChildrenList().find((function(e){return e===t})).$parent,o=this.$children.filter((function(t){return t.$options.name===U.name}));this.rowOffset=0;var s=o.find((function(t){return t.$refs["u-gantt-row"].getBoundingClientRect().top<e.clientY&&t.$refs["u-gantt-row"].getBoundingClientRect().left<e.clientX&&t.$refs["u-gantt-row"].getBoundingClientRect().top+t.$refs["u-gantt-row"].getBoundingClientRect().height>e.clientY&&t.$refs["u-gantt-row"].getBoundingClientRect().left+t.$refs["u-gantt-row"].getBoundingClientRect().width>e.clientX}));if(console.log(s),void 0===s)return console.log("ffff"),void this.snapBackBundle(t);if(this.rowOffset=o.findIndex((function(t){return t===s}))-o.findIndex((function(t){return t===i})),void 0===n){var l=o.findIndex((function(t){return t===i}))+this.rowOffset;return console.log(t.phantomNewEnd,t.barsContainer.width),l<o.length&&l>=0&&s.threadID===i.threadID&&!t.isPosOutOfDragRange(t.phantomX,t.phantomX+t.getBarWidth(t.bar))?(console.log(t.phantomNewStart+t.getBarWidth(t.localBar)),t.bar.start=this.globToText(t.phantomNewStart),t.bar.end=this.globToText(t.phantomNewEnd),console.log(t.bar.end),this.magnetize(t),void 0===t.getOverlapBarAndType(t.localBar,o[l].localBars).overlapBar?(console.log("фуфыкс воскрес"),void this.invokeBarTransition(t,o,i)):void this.snapBackBundle(t)):void this.snapBackBundle(t)}if(!n){var u=!t.isPosOutOfDragRange(t.phantomX,t.phantomX+t.getBarWidth(t.bar));t.bar.start=this.globToText(t.phantomNewStart),t.bar.end=this.globToText(t.phantomNewEnd),t.bundleBars.forEach((function(t){return r.magnetize(t)}));var h=t.bundleBars.every((function(e){var n=r.getGanttBarChildrenList().find((function(t){return t.localBar===e.bar})).$parent;return e===t||void 0===t.getOverlapBarAndType(e.bar,o[o.findIndex((function(t){return t===n}))].localBars).overlapBar}));return console.log(u),console.log(h),console.log(t.getOverlapBarAndType(t.bar,o[o.findIndex((function(t){return t===i}))+this.rowOffset].localBars)),h&&s.threadID===i.threadID&&void 0===t.getOverlapBarAndType(t.bar,o[o.findIndex((function(t){return t===i}))+this.rowOffset].localBars).overlapBar&&u?void this.invokeBarTransition(t,o,i):(console.log("sssss"),void this.snapBackBundle(t))}var d=!t.isPosOutOfDragRange(t.phantomX,t.phantomX+t.getBarWidth(t.bar));t.bar.start=this.globToText(t.phantomNewStart),t.bar.end=this.globToText(t.phantomNewEnd),this.magnetize(t),console.log(t.getOverlapBarAndType(t.bar,o[o.findIndex((function(t){return t===i}))+this.rowOffset].localBars).overlapBar);var f=t.bundleBars.every((function(e){var n=r.getGanttBarChildrenList().find((function(t){return t.localBar===e.localBar})).$parent,a=o.findIndex((function(t){return t===n}))+r.rowOffset;return r.magnetize(e),a<o.length&&a>=0&&n.threadID===o[a].threadID&&void 0===e.getOverlapBarAndType(e.localBar,o[a].localBars.filter((function(e){return e.config.bundle!==t.barConfig.bundle}))).overlapBar&&!e.isPosOutOfDragRange(e.phantomX,e.phantomX+e.getBarWidth(e.bar))}))&&d;if(console.log(f),!f)return void this.snapBackBundle(t);this.invokeFixedBundeBarsTransition(t.bundleBars,o)}},invokeBarTransition:function(t,e,r){var n=this,a=e.findIndex((function(t){return t===r}))+this.rowOffset;e[a]!==r&&(r.localBars.sort((function(e,r){return e===t.localBar?1:r===t.localBar?-1:0})),r.localBars.pop(),e[a].localBars.push(t.localBar),e[a].localBars.sort((function(t,e){return n.textToGlob(t[n.barStartKey])-n.textToGlob(e[n.barStartKey])})))},invokeFixedBundeBarsTransition:function(t,e){var r=this;console.log(t,e,this.rowOffset),t.forEach((function(t){var e=t.$parent;e.localBars.sort((function(e,r){return e===t.localBar?1:r===t.localBar?-1:0})),e.localBars.pop()})),console.log(t,e),t.forEach((function(t){var n=t.$parent;console.log(e.findIndex((function(t){return t})));var a=e.findIndex((function(t){return t===n}))+r.rowOffset;e[a].localBars.push(t.localBar),e[a].localBars.sort((function(t,e){return r.textToGlob(t[r.barStartKey])-r.textToGlob(e[r.barStartKey])}))}))},getGanttBarChildrenList:function(){var t=[],e=this.$children.filter((function(t){return t.$options.name===U.name}));return e.forEach((function(e){var r=e.$children.filter((function(t){return t.$options.name===R.name}));t.push.apply(t,Object(g["a"])(r))})),t},getBarsFromBundle:function(t){return void 0===t||null===t?[]:this.getGanttBarChildrenList().filter((function(e){return e.barConfig.bundle===t}))},initDragOfBarsFromBundle:function(t,e){var r=this;this.movedBarsInDrag=new Set;var n=new Array;return t.initDrag(e),this.movedBarsInDrag.add(t.bar),n.push(t),null!==t.barConfig.bundle&&void 0!==t.barConfig.bundle&&this.getGanttBarChildrenList().forEach((function(a){a.barConfig.bundle===t.barConfig.bundle&&a!==t&&(a.initDrag(e),r.movedBarsInDrag.add(a.bar),n.push(a))})),n},moveBarsFromBundleOfPushedBar:function(t,e,r){var n=this;this.movedBarsInDrag.add(t);var a=t[this.barConfigKey]?t[this.barConfigKey].bundle:null;void 0!==a&&null!==a&&this.getGanttBarChildrenList().forEach((function(i){i.barConfig.bundle===a&&i.bar!==t&&(i.moveBarByChildPointsAndPush(e,r),n.movedBarsInDrag.add(i.bar))}))},shouldSnapBackBar:function(t){if(this.snapBackOnOverlap&&!1!==t.barConfig.pushOnOverlap){var e=t.getOverlapBarAndType(t.bar),r=e.overlapBar;return!!r}return!1},snapBackBundleIfNeeded:function(t){var e=this,r=this.getBarsFromBundle(t.barConfig.bundle);return!(!this.shouldSnapBackBar(t)&&!r.some((function(t){return e.shouldSnapBackBar(t)})))&&(t.snapBack(),r.forEach((function(t){return t.snapBack()})),!0)},snapBackBundle:function(t){console.log(t.bundleBars),t.bundleBars.forEach((function(t){return t.snapBack()}))},onBarEvent:function(t,e){var r=t.event,n=t.type,a=t.time;this.$emit("".concat(n,"-bar"),{event:r,bar:e.bar,time:a})},onDragendBar:function(t,e,r){var n=this.movedBarsInDrag;e.phantomMode||e.phantomChild?(e.phantomMode=!1,e.phantomChild=!1):(this.magnetize(e,r),this.snapBackBundleIfNeeded(e)),this.$emit("dragend-bar",{event:t,bar:e.bar,movedBars:n})},magnetize:function(t,e){if(void 0!==e){var r=e.left,n=e.right;if(r)return void(this.textToGlob(t.bar[this.barStartKey])%1<.5?t.bar[this.barStartKey]=this.globToText(Math.floor(this.textToGlob(t.bar[this.barStartKey])),"start"):t.bar[this.barStartKey]=this.globToText(Math.round(this.textToGlob(t.bar[this.barStartKey])),"start"));if(n)return void(this.textToGlob(t.bar[this.barEndKey])%1<.5?t.bar[this.barEndKey]=this.globToText(Math.floor(this.textToGlob(t.bar[this.barEndKey])),"end"):t.bar[this.barEndKey]=this.globToText(Math.round(this.textToGlob(t.bar[this.barEndKey])),"end"))}this.textToGlob(t.bar[this.barStartKey])%1<.5?(t.bar[this.barStartKey]=this.globToText(Math.floor(this.textToGlob(t.bar[this.barStartKey])),"start"),t.bar[this.barEndKey]=this.globToText(Math.floor(this.textToGlob(t.bar[this.barEndKey])),"end")):(t.bar[this.barStartKey]=this.globToText(Math.round(this.textToGlob(t.bar[this.barStartKey])),"start"),t.bar[this.barEndKey]=this.globToText(Math.round(this.textToGlob(t.bar[this.barEndKey])),"end"))},textToGlob:function(t){var e=t.split(","),r=Object(c["a"])(e,2),n=r[0],a=r[1],i=parseFloat(a),o=Math.trunc(i),s=i%1,l=this.allUnits.findIndex((function(t){return t.groupKey===n&&t.index===o}));return-1===l&&(0===s?(l=this.allUnits.findIndex((function(t){return t.groupKey===n&&t.index+1===o})),-1!==l&&l++):l=this.allUnits.length),l+s},globToText:function(t,e){var r,n,a=Math.trunc(t),i=t%1;a>=this.allUnits.length?(r=this.allUnits[this.allUnits.length-1],n=r.index+1):a<0?(r=this.allUnits[0],n=a):(r=this.allUnits[a],n=r.index,0===n&&"end"===e&&a>0&&0===i&&(r=this.allUnits[a-1],n=r.index+1));var o=(n+i).toFixed(0===i?0:2);return"".concat(r.groupKey,", ").concat(o)},setDragLimitsOfGanttBar:function(t){var e=this;if(this.pushOnOverlap&&!1!==t.barConfig.pushOnOverlap){for(var r=function(){for(var r=a[n],i=e.countGapDistanceToNextImmobileBar(t,null,r,!1),o=Object(c["a"])(i,2),s=o[0],l=o[1],u=function(t){var n=l[t].bar,a=l[t].gapDistance,i=e.getBarsFromBundle(n.barConfig.bundle).filter((function(t){return t!==n}));i.forEach((function(t){var n=e.countGapDistanceToNextImmobileBar(t,a,r),i=Object(c["a"])(n,2),o=i[0],u=i[1];null!==o&&(o<s||!s)&&(s=o),u.forEach((function(t){l.find((function(e){return e.bar===t.bar}))||l.push(t)}))}))},h=0;h<l.length;h++)u(h);null!=s&&"left"===r?t.dragLimitLeft=t.$refs["u-gantt-bar"].offsetLeft-s:null!=s&&"right"===r&&(t.dragLimitRight=t.$refs["u-gantt-bar"].offsetLeft+t.$refs["u-gantt-bar"].offsetWidth+s)},n=0,a=["left","right"];n<a.length;n++)r();var i=this.getBarsFromBundle(t.barConfig.bundle);i.forEach((function(e){e.dragLimitLeft=t.dragLimitLeft,e.dragLimitRight=t.dragLimitRight}))}},countGapDistanceToNextImmobileBar:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=t.barConfig.bundle?[{bar:t,gapDistance:e}]:[],i=t,o=this.getNextGanttBar(i,r);if("left"===r)while(o){var s=o.$refs["u-gantt-bar"].offsetLeft+o.$refs["u-gantt-bar"].offsetWidth;if(e+=i.$refs["u-gantt-bar"].offsetLeft-s,o.barConfig.immobile||o.barConfig.isShadow&&!n)return[e,a];o.barConfig.bundle&&a.push({bar:o,gapDistance:e}),i=o,o=this.getNextGanttBar(o,"left")}if("right"===r)while(o){var l=i.$refs["u-gantt-bar"].offsetLeft+i.$refs["u-gantt-bar"].offsetWidth;if(e+=o.$refs["u-gantt-bar"].offsetLeft-l,o.barConfig.immobile||o.barConfig.isShadow&&!n)return[e,a];o.barConfig.bundle&&a.push({bar:o,gapDistance:e}),i=o,o=this.getNextGanttBar(o,"right")}return[null,a]},getNextGanttBar:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"left",r=[];return r="left"===e?t.$parent.$children.filter((function(e){return e.$options.name===R.name&&e.$parent===t.$parent&&e.$refs["u-gantt-bar"]&&e.$refs["u-gantt-bar"].offsetLeft<t.$refs["u-gantt-bar"].offsetLeft&&!1!==e.barConfig.pushOnOverlap})):t.$parent.$children.filter((function(e){return e.$options.name===R.name&&e.$parent===t.$parent&&e.$refs["u-gantt-bar"]&&e.$refs["u-gantt-bar"].offsetLeft>t.$refs["u-gantt-bar"].offsetLeft&&!1!==e.barConfig.pushOnOverlap})),r.length>0?r.reduce((function(e,r){var n=Math.abs(e.$refs["u-gantt-bar"].offsetLeft-t.$refs["u-gantt-bar"].offsetLeft),a=Math.abs(r.$refs["u-gantt-bar"].offsetLeft-t.$refs["u-gantt-bar"].offsetLeft);return n<a?e:r}),r[0]):null}},provide:function(){var t=this;return{getAllUnits:function(){return t.allUnits},getChartProps:function(){return t.$props},getMovedBars:function(){return t.movedBarsInDrag},globToText:function(e,r){return t.globToText(e,r)},initDragOfBarsFromBundle:function(e,r){return t.initDragOfBarsFromBundle(e,r)},moveBarsFromBundleOfPushedBar:function(e,r,n){return t.moveBarsFromBundleOfPushedBar(e,r,n)},onBarEvent:function(e,r){return t.onBarEvent(e,r)},onDragendBar:function(e,r,n){return t.onDragendBar(e,r,n)},setDragLimitsOfGanttBar:function(e){return t.setDragLimitsOfGanttBar(e)},textToGlob:function(e){return t.textToGlob(e)},moveBarToOtherRow:function(e,r){return t.moveBarToOtherRow(e,r)},checkBarMoving:function(e,r){return t.checkBarMoving(e,r)}}}},j=A,W=Object(l["a"])(j,d,f,!1,null,null,null),N=W.exports,X=(r("4750"),{UGanttChart:N,UGanttRow:U}),F=function(t){Object.keys(X).forEach((function(e){t.component(e,X[e])}))};"undefined"!==typeof window&&window.Vue&&F(window.Vue);n["a"].component("UGanttChart",N),n["a"].component("UGanttRow",U),n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(h)}}).$mount("#app")}});